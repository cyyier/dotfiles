"$schema" = 'https://starship.rs/config-schema.json'

# --- 1. Global Settings ---
palette = "soso_theme"

# --- 2. Dynamic Layout ---
# Ensure there is enough breathing room between segments
format = """
[](color_pink)\
${custom.env_tag}\
[](fg:color_pink bg:color_blue)\
$directory\
[](fg:color_blue bg:color_purple)\
$git_branch\
$git_status\
[](fg:color_purple bg:color_gray)\
$cpp$java$python$golang$rust$nodejs\
[](fg:color_gray bg:color_lavender)\
$cmd_duration\
[](fg:color_lavender)\
\n$character"""

# --- 3. Custom Color Palette (ANSI 218, 110, 177, 245) ---
[palettes.soso_theme]
color_pink = "#ca6fb9"
color_blue = "#577899"
color_purple = "#a761ca"
color_gray = "#8A8A8A"
color_lavender = "#5d5d94"
color_text = "#FFFFFF"

# --- 4. Base Modules ---
[custom.env_tag]
# Explicitly use whoami and ENV_TYPE with a clean separator
command = "echo ❤$(whoami)❤$ENV_TYPE"
when = "true"
style = "bg:color_pink fg:color_text"
# Add a bit of padding [ space text space ] to prevent clipping
format = "[ $output ]($style)"

[directory]
style = "bg:color_blue fg:color_text"
truncation_length = 0
truncate_to_repo = false
format = "[ $path ]($style)"

[git_branch]
symbol = " "
style = "bg:color_purple fg:color_text"
format = "[[ $symbol$branch ]($style)]($style)"

[git_status]
style = "bg:color_purple fg:color_text"
format = "[[($all_status$ahead_behind )]($style)]($style)"

# --- 5. Language Modules (Ensuring no extra spaces) ---
[cpp]
symbol = " "
style = "bg:color_gray fg:color_text"
format = "[$symbol($version)]($style)"

[java]
symbol = " "
style = "bg:color_gray fg:color_text"
format = "[$symbol($version)]($style)"

[python]
symbol = " "
style = "bg:color_gray fg:color_text"
format = "[$symbol($version)]($style)"

[golang]
symbol = " "
style = "bg:color_gray fg:color_text"
format = "[$symbol($version)]($style)"

[rust]
symbol = " "
style = "bg:color_gray fg:color_text"
format = "[$symbol($version)]($style)"

[nodejs]
symbol = " "
style = "bg:color_gray fg:color_text"
format = "[$symbol($version)]($style)"

# --- 6. Command Duration ---
[cmd_duration]
min_time = 2000
style = "bg:color_lavender fg:color_text"
format = "[ ⏱ $duration ]($style)"

# --- 7. Character Symbols ---
[character]
success_symbol = "[❯](bold color_pink)[❯](bold color_blue)[❯](bold color_purple)"
error_symbol = "[❯](bold color_gray)[❯](bold color_gray)[❯](bold color_gray)"